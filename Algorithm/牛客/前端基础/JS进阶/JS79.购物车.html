<!--
@nc app=nowcoder id=3b4a342351ce483e813e5588446fc1f8 topic=271 question=39628 lang=Html
2024-06-05 16:20:52
https://www.nowcoder.com/practice/3b4a342351ce483e813e5588446fc1f8?tpId=271&tqId=39628
[JS79] 购物车
-->

<!--@nc code=start-->

<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <style>
       /* 填写样式 */
        body,html{
    padding: 0;
    margin: 0;
    font-size: 14px;
    color: #000000;
}
table{
    border-collapse: collapse;
    width: 100%;
    table-layout: fixed;
}
thead{
    background: #3d444c;
    color: #ffffff;
}
td,th{
    border: 1px solid #e1e1e1;
    padding: 0;
    height: 30px;
    line-height: 30px;
    text-align: center;
}
    </style>
</head>

<body>
    <!-- 填写标签 -->
    <table id="jsTrolley">
    <thead><tr><th>名称</th><th>价格</th><th>操作</th></tr></thead>
    <tbody>
        <tr><td>产品1</td><td>10.00</td><td><a href="javascript:void(0);">删除</a></td></tr>
        <tr><td>产品2</td><td>30.20</td><td><a href="javascript:void(0);">删除</a></td></tr>
        <tr><td>产品3</td><td>20.50</td><td><a href="javascript:void(0);">删除</a></td></tr>
    </tbody>
    <tfoot><tr><th>总计</th><td colspan="2">60.70(3件商品)</td></tr></tfoot>
</table>
    <script type="text/javascript">
        // 填写JavaScript
        function add(items) {
            const tbody = document.querySelector('tbody')
            let str = ''
            items.forEach(item => {
                str += `<tr><td>${item.name}</td><td>${item.price.toFixed(2)}</td><td><a href="javascript:void(0);">删除</a></td></tr>`
            })
            tbody.innerHTML = tbody.innerHTML + str
            function calc () {
                const products = Array.from(document.querySelector('tbody').children)
                const sum = products.reduce((prev, cur) => prev + Number(cur.children[1].innerHTML), 0)
                document.querySelector('tfoot').children[0].children[1].innerHTML = `${sum.toFixed(2)}(${products.length}件商品)`
            }
            calc()
        }

        function bind() {
            function calc () {
                const products = Array.from(document.querySelector('tbody').children)
                const sum = products.reduce((prev, cur) => prev + Number(cur.children[1].innerHTML), 0)
                document.querySelector('tfoot').children[0].children[1].innerHTML = `${sum.toFixed(2)}(${products.length}件商品)`
            }
            const tbody = document.querySelector('tbody')
            tbody.onclick = function (e) {
                if (e.target.tagName === 'A') {
                    e.target.parentElement.parentElement.remove()
                    calc()
                }
            }
        }
        bind()
    </script>
</body>

</html>

<!--@nc code=end-->
